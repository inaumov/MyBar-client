<div ng-include="'views/templates/myspace-bar.html'"></div>
<h2>My Shelf</h2>
<div id="shelf" class="margin-top-30">

    <div ng-switch on="shelfCtrl.formPanel">
        <!--plus button panel-->
        <div class="col-sm-2 col-sm-push-10 text-right" ng-switch-when='false'>
            <button class="btn btn-link" ng-click="shelfCtrl.formPanel = true; shelfCtrl.newBottle()">
                <span class="glyphicon glyphicon-plus"></span>
            </button>
        </div>
        <!--new bottle form-->
        <form name="AddBeverageForm" id="ingredientForm" class="form-inline" role="form" ng-switch-when='true'>
            <div class="form-group col-sm-2 text-left">
                <input type="text" class="form-control" id="img-path"
                       ng-model="shelfCtrl.bottle.imageUrl"
                       placeholder="Photo url" size="10"/>
            </div>

            <div class="form-group col-sm-2 text-left">
                <datalist id="ingredients" name="ingredientSelect">
                    <option value="{{ingredient.kind}}" ng-repeat="ingredient in shelfCtrl.ingredients"/>
                </datalist>
                <input type="text" class="form-control" list="ingredients"
                       data-ng-model="shelfCtrl.bottle.ingredient.kind"
                       placeholder="Beverage" size="10">
            </div>
            <div class="form-group col-sm-2 text-left">
                <input type="text" id="brand" class="form-control"
                       ng-model="shelfCtrl.bottle.brandName"
                       required ng-trim="true"
                       placeholder="Brand name" size="10">
            </div>
            <div class="form-group col-sm-2 text-left">
                <datalist id="volumes" name="volumeSelect">
                    <option value="0.5"/>
                    <option value="0.7"/>
                    <option value="1.0"/>
                </datalist>
                <input type="text" list="volumes" class="form-control"
                       ng-model="shelfCtrl.bottle.volume" required ng-trim="false"
                       placeholder="Volume" size="7">
            </div>
            <div class="form-group col-sm-2 text-left">
                <input type="text" class="form-control" id="price"
                       ng-model="shelfCtrl.bottle.price" required ng-trim="false"
                       placeholder="Price (UAH)" size="7">
            </div>
            <div class="form-group col-sm-1">
                <input type="checkbox" class="checkbox"
                       ng-model="shelfCtrl.bottle.inShelf" ng-true-value="'YES'" ng-false-value="'NO'">
            </div>
            <div class="form-group col-sm-1 text-right">
                <button class="btn btn-link" ng-click="shelfCtrl.save()">
                    <span class="glyphicon glyphicon-ok"></span>
                </button>
                <button class="btn btn-link" ng-click="shelfCtrl.formPanel = false">
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
            </div>
        </form>
    </div>

    <table class="table table-condensed margin-top-30" ng-if="shelfCtrl.itemsInShelf.length">
        <thead>
        <tr>
            <th class="col-sm-2"><span class="glyphicon glyphicon-picture"></span></th>
            <th class="col-sm-2">Beverage Kind</th>
            <th class="col-sm-2">Brand name</th>
            <th class="col-sm-2">Volume</th>
            <th class="col-sm-2">Price</th>
            <th class="col-sm-1">In Shelf</th>
            <th class="col-sm-1"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-class="item.inShelf == 'YES' ? 'active' : ''"
            ng-repeat="item in shelfCtrl.itemsInShelf | orderBy:['inShelf']">
            <td class="col-sm-2"><img class="img-responsive" ng-src="{{item.imageUrl || 'img/blank.gif'}}" ng-class="{true: '', false: 'no-available'}[!!item.imageUrl]"/></td>
            <td class="col-sm-2">{{shelfCtrl.getIngredientKind(item.ingredient.id)}}</td>
            <td class="col-sm-2">{{item.brandName}}</td>
            <td class="col-sm-2">{{item.volume}}</td>
            <td class="col-sm-2">{{item.price}}</td>
            <td class="col-sm-1">
                <input type="checkbox" class="checkbox" ng-checked="item.inShelf == 'YES'"
                       ng-model="item.inShelf" ng-true-value="'YES'" ng-false-value="'NO'">
            </td>
            <td class="col-sm-1 text-right">
                <button class="btn btn-link" type="button" ng-click="shelfCtrl.edit(item)">
                    <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button class="btn btn-link" type="button" ng-click="shelfCtrl.delete(item)">
                    <span class="glyphicon glyphicon-trash"></span>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>